<!doctype html>

<head>
    <title>Hello from Flask</title>
</head>

<body>
    
    <input id="providerid" type="hidden" value="{{ data.id }}" >

    <form action="/" id="addProvider">
        <label for="nameprovider">Nombre del Proveedor: </label> 
        <input type="text" name="nameprovider"  id="nameprovider" value="{{ data.title }}">

        <label for="descriptionprovider">Descripci√≥n: </label> 
        <input type="text" name="descriptionprovider"  id="descriptionprovider" value="{{ data.description }}">
        
        <input type="submit" value="Guardar">
        <button onclick="deleteProvider();"> Eliminar </button>
    </form>

    
    <!-- Jquery -->
    <script src="/static/js/jquery-3.3.1.min.js"></script>



    <script>
    // Attach a submit handler to the form
    $( "#addProvider" ).submit(function( event ) {
     
        event.preventDefault();
        
        var idProvider  = $('#providerid').val();
        var name        = $('#nameprovider').val();
        var description = $('#descriptionprovider').val();
        
        var url = '/providers/edit/' + idProvider;

        $.ajax({
            url: url,
            type: 'post',
            dataType: 'json',
            contentType: 'application/json',
            success: function (data) {
                console.log("saaaaaaaaaaaa");;
            },
            data:  JSON.stringify ({'id': idProvider,'title': name , 'description': description})
        });
     
    });

    function deleteProvider(){
        var idProvider = $('#providerid').val();
        
        var url = '/providers/edit/' + idProvider;
        console.log(url);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (data) {
                console.log("saaaaaaaaaaaa");;
            }
            //data:  JSON.stringify ({'id': idProvider,'title': name , 'description': description})
        });

    }
    </script>

</body>
